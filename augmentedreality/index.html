<!DOCTYPE html>
<html>
	<!--<script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>-->
	<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
	<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

	<head>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@700&display=swap" rel="stylesheet">

		<style>

		@import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@700&display=swap');

		.a-enter-vr-button {
			display: none;
		}

		#footer {
			position: fixed;
			width: 100%;
			height: 48px;
			left: 0;
			bottom: 0;
			background-color: #00579B;
			z-index: 100;
		}

		.button {
			border: none;
			text-align: center;
			font-family: 'Libre Baskerville', serif;
			width: 96px;
			height: 100%;
			color: #FFD54F;
			background-color: #004472;
			font-weight: bold;
		}

		#previous {
			float: left;
		}

		#next {
			float: right;
		}

		</style>
	</head>

	<body style="margin : 0px; overflow: hidden;">
		<a-scene embedded arjs>

			<a-assets id="assets">
				<a-asset-item id="monalisa" src="https://ssmmuseum.github.io/augmentedreality/img/monalisa.gltf"></a-asset-item>
				<a-asset-item id="cardback" src="https://ssmmuseum.github.io/augmentedreality/img/cardback.gltf"></a-asset-item>
			</a-assets>

			<a-marker type="pattern" preset="custom" url="https://ssmmuseum.github.io/augmentedreality/img/marker/pattern-qrcode.patt">
			
			<a-entity
				id="mainCanvas"
				position="0 0 0"
				scale="0.1 0.1 0.1"
				gltf-model="#cardback"
				visible="true"
			></a-entity>

			</a-marker>
			<a-entity camera></a-entity>
		</a-scene>

	<div id="footer">

		<button id="previous" class="button"> PREV </button>
		<button id="next" class="button"> NEXT </button>

	</div>

	<script>

		function GetAssets() {
			// Get the span element
			const mySpan = document.getElementById("assets");

			// Get all the elements within the span element
			const elementsWithinAssets = mySpan.getElementsByTagName("*");

			// Create an array to hold the IDs of each element
			const idList = [];

			// Loop through each element and add its ID to the array
			for (let i = 0; i < elementsWithinAssets.length; i++) {
				const element = elementsWithinAssets[i];
				const id = '#' + element.id;
				if (id) {
					idList.push(id);
				}
			}

			// Log the list of IDs to the console
			console.log(idList);	
		}

		GetAssets();

		const currentIndex = 0 % idList.length;

		console.log("The length is " + idList.length);
		console.log("The current index is " currentIndex);

		// Go to default model
		document.getElementById('mainCanvas').setAttribute('gltf-model', idList[0]);
	</script>

	
  </body>
</html>